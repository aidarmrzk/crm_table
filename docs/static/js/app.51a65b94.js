(function(){"use strict";var e={7532:function(e,n,a){var t=a(7764),i=a(4108);function l(e,n,a,t,l,o){const r=(0,i.E1)("MainBoard");return(0,i.Wz)(),(0,i.Az)(r)}var o=a(9096),r=a.p+"static/img/constructor.fb57d8d7.svg",d=a.p+"static/img/arrow.39bf9eb6.svg",s=a.p+"static/img/combined-shape.6e93405a.svg",c=a.p+"static/img/move.a7866c64.svg",u=a.p+"static/img/three_dots.6b285e93.svg",g=a(2500),m=a(7192);const v=e=>((0,i.ED)("data-v-36cffb52"),e=e(),(0,i.ii)(),e),p={class:"wrapper"},_=v((()=>(0,i.QD)("div",{class:"sidebar"},null,-1))),D={class:"container"},b=v((()=>(0,i.QD)("h1",null,"Проведение ТО и мелкий ремонт",-1))),f={class:"nav"},h=v((()=>(0,i.QD)("ul",null,[(0,i.QD)("li",null,"Общее"),(0,i.QD)("li",{class:"selected"},"Товар списания"),(0,i.QD)("li",null,"Доп. расходы")],-1))),W={class:"setting"},E={key:0,class:"setting-box"},A={key:0,class:"setting-box-img",src:d,alt:""},O=v((()=>(0,i.QD)("span",null,"Отображение столбцов",-1))),T={key:1,src:d,alt:""},I={key:0},Q=["checked","onChange"],N=v((()=>(0,i.QD)("img",{src:s,alt:""},null,-1))),w={class:"table-block"},S={class:"table"},k=["onDragstart","onDragover"],x={class:"column"},y=["onMousedown","onMouseover","onMouseout"],C=["onDragstart","onDragover"],L={class:"label"},z={class:"cell-container"},G=v((()=>(0,i.QD)("img",{class:"grab",src:c,alt:""},null,-1))),M={class:"label"},R={class:"cell-container"},U=["onClick"],V=["onClick"],P={class:"label"},j=["onUpdate:modelValue"],B={class:"label"},H=["onUpdate:modelValue"],Y={class:"label"},$=["onUpdate:modelValue"],F={class:"label"},X=["onUpdate:modelValue"],q={class:"label"},J=["onUpdate:modelValue"];var K={__name:"MainBoard",setup(e){const n=(0,m.o3)(),a=(0,i.S6)((()=>n.state.materials)),l=(0,i.S6)((()=>n.state.header)),d=(0,i.S6)((()=>n.getters.getVisibleHeader())),s=(0,g.IL)({item:null,dragging:!1,overIndex:null}),c=(0,g.IL)(!1),v=(0,g.IL)(!1),K=()=>{c.value&&(v.value=!1),c.value=!c.value},Z=()=>{v.value=!v.value},ee=e=>{n.commit("CHANGE_STATUS",e)},ne=()=>{const e={id:ie(),name_product:"",name_unit:"",price:"",count:"",total:""};n.commit("ADD_POSITION",e)},ae=e=>{n.commit("SET_DELETE",e)},te=e=>{n.commit("DELETE_POSITION",e)},ie=()=>{const e=(new Date).getTime(),n=Math.floor(1e3*Math.random());return`${e}-${n}`},le=(0,g.IL)(!1),oe=window.innerWidth>550,re=e=>{le.value=!0,oe&&(s.value["item"]=e,s.value["dragging"]=!0,n.commit("SET_DRAGGING_ROW",s.value),console.log("dragStart"))},de=(e,a)=>{oe&&le.value&&s.value.item.id&&s.value.item.id!==a.id&&(s.value["overIndex"]=e,n.commit("SET_DRAGGING_ROW",s.value),n.commit("DELETE_POSITION",s.value.item),n.commit("INSERT_POSITION",s.value),console.log("dragOver"))},se=e=>{const n=e.relatedTarget;n.closest(".cell-drag")||(ue(),console.log("dragLeave"))},ce=()=>{ue(),console.log("drop")},ue=()=>{oe&&s.value.item.id&&le.value&&(s.value["dragging"]=!1,n.commit("SET_DRAGGING_ROW",s.value),le.value=!1,console.log("restDragRow"))},ge=(e,a)=>{let t=0;const i=()=>{t=e.x,document.addEventListener("mousemove",l),document.addEventListener("mouseup",o)},l=e=>{const i=e.x-t;t=e.x;const l={id_name:a,dx:i};n.commit("SET_WIDTH",l)},o=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",o),t=0};i()},me=e=>{n.commit("SET_BORDER",e)},ve=(0,g.IL)(!1),pe=e=>{ve.value=!0,s.value["item"]=e,s.value["dragging"]=!0,n.commit("SET_DRAGGING_COLUMN",s.value),console.log("dragColumnStart")},_e=(e,a,t)=>{if(ve.value&&!e.target.classList.contains("resize")&&s.value.item.id_name&&s.value.item.id_name!==t.id_name){const t=e.target.getBoundingClientRect(),i=t.left+t.width/2,l=Math.abs(e.clientX-i)<t.width/50;l&&(s.value["overIndex"]=a,n.commit("DELETE_COLUMN",s.value.item),n.commit("INSERT_COLUMN",s.value),console.log("dragColumnOver"))}},De=e=>{const n=e.relatedTarget;n.closest("thead")||(fe(),console.log("dragColumnLeave"))},be=()=>{fe(),console.log("dropColumn")},fe=()=>{ve.value&&(s.value["dragging"]=!1,n.commit("SET_DRAGGING_COLUMN",s.value),ve.value=!1,console.log("restDragColumn"))};return(e,n)=>((0,i.Wz)(),(0,i.An)("div",p,[_,(0,i.QD)("div",D,[b,(0,i.QD)("div",f,[h,(0,i.QD)("div",W,[(0,i.QD)("img",{src:r,alt:"",onClick:K}),c.value?((0,i.Wz)(),(0,i.An)("div",E,[(0,i.QD)("div",{class:"setting-box-header",onClick:Z},[v.value?((0,i.Wz)(),(0,i.An)("img",A)):(0,i.g1)("",!0),O,v.value?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("img",T))]),v.value?((0,i.Wz)(),(0,i.An)("ul",I,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(l.value,((e,n)=>((0,i.Wz)(),(0,i.An)("li",{key:n},[(0,i.QD)("input",{type:"checkbox",checked:e.status,onChange:n=>ee(e.id_name)},null,40,Q),(0,i.mY)(" "+(0,o.WA)(e.name),1)])))),128))])):(0,i.g1)("",!0)])):(0,i.g1)("",!0)])]),(0,i.QD)("div",{class:"add_row"},[(0,i.QD)("button",{onClick:ne},[N,(0,i.mY)("Добавить строку ")])]),(0,i.QD)("div",w,[(0,i.QD)("table",S,[(0,i.QD)("thead",null,[(0,i.QD)("tr",null,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(d.value,((e,n)=>((0,i.Wz)(),(0,i.An)("th",{key:e.id_name,style:(0,o.MN)({maxWidth:e.width+"px",width:e.width+"px"}),draggable:"true",onDragstart:n=>pe(e),onDragover:(0,t.Y7)((a=>_e(a,n,e)),["prevent"]),onDragleave:De,onDrop:be,class:(0,o.WN)({dragging:e.dragging})},[(0,i.QD)("span",x,[(0,i.mY)((0,o.WA)(e.name)+" ",1),(0,i.QD)("div",{class:"resize",onMousedown:(0,t.Y7)((n=>ge(n,e.id_name)),["prevent"]),onMouseover:n=>me(e.id_name),onMouseout:n=>me(e.id_name)},null,40,y)])],46,k)))),128))])]),(0,i.QD)("tbody",null,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(a.value,((e,n)=>((0,i.Wz)(),(0,i.An)("tr",{class:(0,o.WN)(["drag",{dragging:e.dragging}]),key:e.id},[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(d.value,((a,l)=>((0,i.Wz)(),(0,i.An)(i.ae,{key:l},["index"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:0,class:(0,o.WN)(["cell cell-drag",{border:a.border,dragging:a.dragging}]),onDragstart:n=>re(e),onDragover:(0,t.Y7)((a=>de(n,e)),["prevent"]),onDragleave:se,onDrop:ce},[(0,i.QD)("span",L,(0,o.WA)(a.name),1),(0,i.QD)("div",z,[G,(0,i.QD)("span",null,(0,o.WA)(n+1),1)])],42,C)):(0,i.g1)("",!0),"action"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:1,class:(0,o.WN)(["cell cell-delete",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",M,(0,o.WA)(a.name),1),(0,i.QD)("div",R,[(0,i.QD)("img",{src:u,alt:"",onClick:n=>ae(e)},null,8,U),e.delete?((0,i.Wz)(),(0,i.An)("div",{key:0,class:"delete",onClick:n=>te(e)}," Удалить ",8,V)):(0,i.g1)("",!0)])],2)):(0,i.g1)("",!0),"name_unit"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:2,class:(0,o.WN)(["cell",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",P,(0,o.WA)(a.name),1),(0,i.wt)((0,i.QD)("input",{type:"text","onUpdate:modelValue":n=>e.name_unit=n},null,8,j),[[t.Og,e.name_unit]])],2)):(0,i.g1)("",!0),"price"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:3,class:(0,o.WN)(["cell",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",B,(0,o.WA)(a.name),1),(0,i.wt)((0,i.QD)("input",{type:"text","onUpdate:modelValue":n=>e.price=n},null,8,H),[[t.Og,e.price]])],2)):(0,i.g1)("",!0),"count"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:4,class:(0,o.WN)(["cell",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",Y,(0,o.WA)(a.name),1),(0,i.wt)((0,i.QD)("input",{type:"text","onUpdate:modelValue":n=>e.count=n},null,8,$),[[t.Og,e.count]])],2)):(0,i.g1)("",!0),"name_product"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:5,class:(0,o.WN)(["cell",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",F,(0,o.WA)(a.name),1),(0,i.wt)((0,i.QD)("input",{type:"text","onUpdate:modelValue":n=>e.name_product=n},null,8,X),[[t.Og,e.name_product]])],2)):(0,i.g1)("",!0),"total"===a.id_name?((0,i.Wz)(),(0,i.An)("td",{key:6,class:(0,o.WN)(["cell",{border:a.border,dragging:a.dragging}])},[(0,i.QD)("span",q,(0,o.WA)(a.name),1),(0,i.wt)((0,i.QD)("input",{type:"text","onUpdate:modelValue":n=>e.total=n},null,8,J),[[t.Og,e.total]])],2)):(0,i.g1)("",!0)],64)))),128))],2)))),128))])])])])]))}},Z=a(4100);const ee=(0,Z.c)(K,[["__scopeId","data-v-36cffb52"]]);var ne=ee,ae={name:"App",components:{MainBoard:ne}};const te=(0,Z.c)(ae,[["render",l]]);var ie=te,le=(a(3248),a(6888));const oe=(0,m.eC)({plugins:[(0,le.c)()],state:{header:[{id_name:"index",name:"Номер",status:!0,width:100,border:!1,dragging:!1},{id_name:"action",name:"Действие",status:!0,width:100,border:!1,dragging:!1},{id_name:"name_unit",name:"Наименование единицы",status:!0,width:500,border:!1,dragging:!1},{id_name:"price",name:"Цена",status:!0,width:100,border:!1,dragging:!1},{id_name:"count",name:"Кол-во",status:!0,width:100,border:!1,dragging:!1},{id_name:"name_product",name:"Название товара",status:!0,width:300,border:!1,dragging:!1},{id_name:"total",name:"Итого",status:!0,width:100,border:!1,dragging:!1}],materials:[{id:7864,name_product:"Мраморный щебень",name_unit:"Мраморный щебень фр. 2-5 мм, 25кг",price:1e3,count:1,total:5e3,dragging:!1,delete:!1},{id:5466,name_product:"Мраморный щебень",name_unit:"Мраморный щебень фр. 5-10 мм, 50кг",price:2e3,count:2,total:2e4,dragging:!1,delete:!1},{id:7894,name_product:"Мраморный щебень",name_unit:"Мраморный щебень фр. 2-5 мм, 25кг (белый)",price:2e3,count:3,total:2e4,dragging:!1,delete:!1},{id:6523,name_product:"Мраморный щебень",name_unit:"Мраморный щебень фр. 2-5 мм, 25кг (вайт)",price:2e3,count:4,total:2e4,dragging:!1,delete:!1},{id:1279,name_product:"Мраморный щебень",name_unit:"Мраморный щебень фр. 2-5 мм, 25кг, возврат",price:2e3,count:5,total:2e4,dragging:!1,delete:!1}]},getters:{getVisibleHeader:e=>()=>e.header.filter((e=>e.status))},mutations:{ADD_POSITION(e,n){e.materials.push(n)},CHANGE_STATUS(e,n){const a=e.header.find((e=>e.id_name===n));a.status=!a.status},SET_DELETE(e,n){const a=e.materials.findIndex((e=>e.id===n.id));-1!==a&&(e.materials[a].delete=!e.materials[a].delete)},SET_DRAGGING_ROW(e,n){const a=e.materials.find((e=>e.id===n.item["id"]));a.dragging=n["dragging"]},DELETE_POSITION(e,n){const a=e.materials.findIndex((e=>e.id===n.id));-1!==a&&e.materials.splice(a,1)},INSERT_POSITION(e,n){e.materials.splice(n.overIndex,0,n.item)},SET_WIDTH(e,n){const a=e.header.find((e=>e.id_name===n["id_name"]));a.width+=n["dx"]},SET_BORDER(e,n){const a=e.header.find((e=>e.id_name===n));a.border=!a.border},SET_DRAGGING_COLUMN(e,n){const a=e.header.find((e=>e.id_name===n.item["id_name"]));a.dragging=n["dragging"]},DELETE_COLUMN(e,n){const a=e.header.findIndex((e=>e.id_name===n.id_name));-1!==a&&e.header.splice(a,1)},INSERT_COLUMN(e,n){e.header.splice(n.overIndex,0,n.item)}}});var re=oe;const de=(0,t.W0)(ie);de.use(re),de.mount("#app")}},n={};function a(t){var i=n[t];if(void 0!==i)return i.exports;var l=n[t]={exports:{}};return e[t].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(n,t,i,l){if(!t){var o=1/0;for(c=0;c<e.length;c++){t=e[c][0],i=e[c][1],l=e[c][2];for(var r=!0,d=0;d<t.length;d++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](t[d])}))?t.splice(d--,1):(r=!1,l<o&&(o=l));if(r){e.splice(c--,1);var s=i();void 0!==s&&(n=s)}}return n}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[t,i,l]}}(),function(){a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,{a:n}),n}}(),function(){a.d=function(e,n){for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){a.p=""}(),function(){var e={524:0};a.O.j=function(n){return 0===e[n]};var n=function(n,t){var i,l,o=t[0],r=t[1],d=t[2],s=0;if(o.some((function(n){return 0!==e[n]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(d)var c=d(a)}for(n&&n(t);s<o.length;s++)l=o[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},t=self["webpackChunkvue_opt6"]=self["webpackChunkvue_opt6"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=a.O(void 0,[999],(function(){return a(7532)}));t=a.O(t)})();
//# sourceMappingURL=app.51a65b94.js.map